<!doctype html>
<html lang="en" itemscope itemtype="http://schema.org/Article">

    <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Category Pagination in Jekyll - Arka Roy</title>
    <meta name="description" content="Jekyll has a built-in support for pagination. But it does not paginate the posts in a specific category. In this tutorial, we will discuss on how to paginate a specific category in Jekyll with custom plugin built from scratch.">
    <meta name="author" content="Arka Roy">
    <meta name="google-site-verification" content="Hoal6De7aoiiqdo7jTEmhXXXJo571pQuGeRjB3hY3-c">
    <meta name="msvalidate.01" content="AECE4670236DEBC0B41933B8F9A56547">
    <meta name="yandex-verification" content="5f83a425d7a76ae8">
    <meta name="p:domain_verify" content="a2b47611cc9905cb28e8b90214a6026b">
    <link href="http://fonts.googleapis.com/css?family=Asap:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/image/icon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/image/icon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/image/icon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/image/icon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/image/icon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/image/icon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/image/icon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/image/icon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/image/icon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/assets/image/icon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/image/icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/assets/image/icon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/image/icon/favicon-16x16.png">
    <!--
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    -->

    <link rel="author" href="https://plus.google.com/+ArkaRoyGPlus">
    <meta property="fb:admins" content="100000470507339">

    <!-- Schema.org markup for Google+ -->
    <meta itemprop="name" content="Category Pagination in Jekyll - Arka Roy">
    <meta itemprop="description" content="Jekyll has a built-in support for pagination. But it does not paginate the posts in a specific category. In this tutorial, we will discuss on how to paginate a specific category in Jekyll with custom plugin built from scratch.">
    <meta itemprop="image" content="http://www.arkaroy.net/assets/image/default-thumbnail.jpg">

    <!-- Open Graph data for Facebook -->
    <meta property="og:title" content="Category Pagination in Jekyll - Arka Roy">
    <meta property="og:image" content="http://www.arkaroy.net/assets/image/default-thumbnail.jpg">
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://www.arkaroy.net/blog/category-pagination-in-jekyll/">
    <meta property="og:description" content="Jekyll has a built-in support for pagination. But it does not paginate the posts in a specific category. In this tutorial, we will discuss on how to paginate a specific category in Jekyll with custom plugin built from scratch.">

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="http://www.arkaroy.net/blog/category-pagination-in-jekyll/">
    <meta name="twitter:title" content="Category Pagination in Jekyll - Arka Roy">
    <meta name="twitter:description" content="Jekyll has a built-in support for pagination. But it does not paginate the posts in a specific category. In this tutorial, we will discuss on how to paginate a specific category in Jekyll with custom plugin built from scratch.">
    <meta name="twitter:image" content="http://www.arkaroy.net/assets/image/default-thumbnail.jpg">
    <meta name="twitter:site" content="@iarkaroy">
    <meta name="twitter:creator" content="@iarkaroy">

    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-61692534-1', 'auto');
        ga('send', 'pageview');

    </script>
</head>

    <body>

        <div class="page-wrapper">
            
            <div class="page-header">
                <div class="display-table">

    <header class="display-cell">

        <a href="http://www.arkaroy.net" class="logo">
            <i class="icon-arkaroy-logo"></i>
            <span>Arka Roy</span>
        </a>

        <p>I'm a passionate and proficient web designer and application developer residing in Kolkata, India.</p>

        <nav class="main-nav">

            <ul class="main-menu list-inline">
                <li><a href="/about/">About</a></li>
                <li class="menu-separator"></li>
                <li><a href="/portfolio/">Portfolio</a></li>
                <li class="menu-separator"></li>
                <li><a href="/blog/">Blog</a></li>
                <li class="menu-separator"></li>
                <li><a href="/contact/">Contact</a></li>
            </ul>                

        </nav>

    </header>

</div>
            </div>
            
            <div class="page-content">
                <div class="entry post-entry single">

    <header class="entry-header">
        <h1 class="entry-title">Category Pagination in Jekyll</h1>
        <p class="entry-meta"><em>Mar 28, 2015 by Arka Roy</em></p>
        <div class="social-share" data-url="http://www.arkaroy.net/blog/category-pagination-in-jekyll/">
    <a class="twitter" href="https://twitter.com/intent/tweet?text=Category Pagination in Jekyll&url=http://www.arkaroy.net/blog/category-pagination-in-jekyll/&via=iarkaroy&related=iarkaroy" rel="nofollow" target="_blank" title="Share this on Twitter">
        <i class="fa fa-twitter fa-fw"></i>
        <span class="shares-twitter">Share</span>
    </a>
    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?t=Category Pagination in Jekyll&u=http://www.arkaroy.net/blog/category-pagination-in-jekyll/" rel="nofollow" target="_blank" title="Share this on Facebook">
        <i class="fa fa-facebook fa-fw"></i>
        <span class="shares-facebook">Share</span>
    </a>
    <a class="googleplus" href="https://plus.google.com/share?url=http://www.arkaroy.net/blog/category-pagination-in-jekyll/" rel="nofollow" target="_blank" title="Share this on Google Plus">
        <i class="fa fa-google-plus fa-fw"></i>
        <span class="shares-googleplus">Share</span>
    </a>
    <a class="linkedin" href="http://www.linkedin.com/shareArticle?mini=true&title=Category Pagination in Jekyll&url=http://www.arkaroy.net/blog/category-pagination-in-jekyll/" rel="nofollow" target="_blank" title="Share this on LinkedIn">
        <i class="fa fa-linkedin fa-fw"></i>
        <span class="shares-linkedin">Share</span>
    </a>
</div>
        
        <br>
        
    </header>

    <article class="entry-content">
        <p>This site is built on Jekyll - a blog aware static site generator. When I was building this, I wanted to separate my blog from my portfolio. Of course I would be using custom post type for my portfolio if I was developing on Wordpress. Here I thought to stay straight and simple and I just created two site categories: portfolio and blog and I am using custom permalink which makes it difficult to use the default pagination setup. And I also want to paginate only the blog category.</p>

<p>Here, in this tutorial, we will discuss on how to paginate a specific category in Jekyll with custom plugin built from scratch.</p>

<p>Let’s get started.</p>

<h2 id="site-structure">Site Structure</h2>

<p>In order for the plugin to work, I have removed the <code>index.html</code> from <code>blog</code> category (i.e. directory). Now my site structure looks like this:</p>

<pre><code>+ index.html
+ about.html
+ blog &lt;- no index page for blog
    + _posts
        + 2012-01-02-blog-post-01.markdown
        + 2012-01-03-blog-post-02.markdown
+ portfolio
    + index.html &lt;- index page for portfolio
    + _posts 
        + 2012-02-01-project-01.markdown
        + 2012-02-02-project-02.markdown
</code></pre>

<p>I want the <code>index.html</code> in the <code>blog</code> category to be generated by the plugin. Here is the site structure I wish to have:</p>

<pre><code>+ index.html
+ about.html
+ blog
    + index.html
    + pages
        + 2
            + index.html
        + 3
            + index.html
        ...
            ...
    + blog-post-01
        + index.html
    + blog-post-02
        + index.html
+ portfolio
    + project-01
        + index.html
    + project-02
        + index.html
</code></pre>

<p>As you can see, <code>index.html</code> in the <code>blog</code> category will be generated by the plugin as the very first page of the pagination. And from second page onward, it will live in respective directories under <code>pages</code> directory.</p>

<h2 id="liquid-template">Liquid Template</h2>

<p>The template for iterating over the current set of posts and showing them look like this:</p>

<pre><code>&lt;h1&gt;Blog&lt;/h1&gt;

{% for post in page.current_posts %}
&lt;article class="entry"&gt;
    &lt;h3 class="entry-title"&gt;
        &lt;a href="{{ post.url | prepend: site.baseurl | prepend: site.url }}" title="Read more on {{ post.title }}" rel="bookmark"&gt;{{ post.title }}&lt;/a&gt;
    &lt;/h3&gt;
    &lt;div class="entry-excerpt"&gt;
        {{ post.excerpt }}
    &lt;/div&gt;
    &lt;div class="entry-meta"&gt;
        &lt;em&gt;{{ post.date | date: "%b %-d, %Y" }} by {{ site.author.name }}&lt;/em&gt;
    &lt;/div&gt;
&lt;/article&gt;
{% endfor %}
</code></pre>

<p>There should also be navigation links for previous and next pages. Here goes the template for that:</p>

<pre><code>{% if page.total_pages &gt; 1 %}
    &lt;div class="posts-nav-links clearfix"&gt;        
        {% if page.prev_page %}
            {% if page.prev_page == 1 %}
                &lt;a class="pull-left" href="/blog/"&gt;&amp;lt;&lt;/a&gt;
            {% else %}
                &lt;a class="pull-left" href="/blog/pages/{{ page.prev_page }}"&gt;&amp;lt;&lt;/a&gt;
            {% endif %}
        {% endif %}
        {% if page.next_page %}
            &lt;a class="pull-right" href="/blog/pages/{{ page.next_page }}"&gt;&amp;gt;&lt;/a&gt;
        {% endif %}
    &lt;/div&gt;
{% endif %}
</code></pre>

<p>I include these templates in a heredoc inside my plugin.</p>

<h2 id="the-configuration">The Configuration</h2>

<p>Before diving into writing the plugin, we need to set some config options in the <code>_config.yml</code> file to make the plugin a bit more maintainable.</p>

<p>We need to provide an option to later modify number of posts in a page without touching the plugin. For this reason, we are going to include <code>posts_per_page</code> in our <code>_config.yml</code>.</p>

<pre><code>paginated_category: "blog"
posts_per_page: 20
</code></pre>

<p>The setting <code>paginated_category</code> will tell the plugin which category to use for pagination. We may hardcode this in our plugin, but it is a bit more professional to provide an option to change the setting later without looking at the plugin.</p>

<h2 id="the-code">The Code</h2>

<p>First, create a file <code>CategoryPostPaginator.rb</code> inside your <code>_plugins</code> directory.</p>

<p>The first class to create is the “Generator.” All generators are called by Jekyll at site build, so if you want code that’s going to create new pages or content, you want to sub-class this class.</p>

<p>When Jekyll calls a generator, it calls the <code>generate</code> method, so that’s the first method to implement. In our class, it loops through all the posts in the site and group the posts according to their position (or index). Then it crates a page for each group.</p>

<pre><code>class CategoryPostPaginator &lt; Generator

    def generate(site)
        all_posts = site.categories[site.config['paginated_category']]
        site.data['all_posts'] = all_posts
        posts_per_page = Float(site.config['posts_per_page'])
        total_posts = Float(all_posts.size)
        total_pages = Float(total_posts / posts_per_page)
        total_pages = total_pages.ceil
        site.data['paginated_pages'] = Hash.new
        (1..total_pages).each do |page_num|
            site.pages &lt;&lt; PostListingPage.new(site, total_pages, page_num, all_posts.slice!(0, posts_per_page.to_i))
        end
    end

end
</code></pre>

<p>Next, we need to subclass the <code>Page</code> class for our specific needs. This code is very specific to my site, you may want to change the logic here to meet your needs. Basically, I am creating a series of pages to show category indexes. This code customizes the layout that’s used and adds some information to the generated page. I have included my liquid template in heredoc statement.</p>

<pre><code>class PostListingPage &lt; Page

    def initialize(site, total_pages, current_page, current_posts)
        @site = site
        @total_pages = total_pages
        @current_page = current_page
        self.ext = '.html'
        self.basename = 'index'
        prev_page = nil
        next_page = current_page + 1
        if current_page &gt; 1
            prev_page = current_page - 1
        end
        if next_page &gt; total_pages
            next_page = nil
        end
        self.data = {
            'layout' =&gt; 'default',
            'title' =&gt; "Blog",
            'current_posts' =&gt; current_posts,
            'total_pages' =&gt; total_pages,
            'current_page' =&gt; current_page,
            'prev_page' =&gt; prev_page,
            'next_page' =&gt; next_page
        }
        self.content = &lt;&lt;-EOS

&lt;h1&gt;Blog&lt;/h1&gt;

{% for post in page.current_posts %}
    &lt;article class="entry"&gt;
        &lt;h3 class="entry-title"&gt;
            &lt;a href="{{ post.url | prepend: site.baseurl | prepend: site.url }}" title="Read more on {{ post.title }}" rel="bookmark"&gt;{{ post.title }}&lt;/a&gt;
        &lt;/h3&gt;
        &lt;div class="entry-excerpt"&gt;
            {{ post.excerpt }}
        &lt;/div&gt;
        &lt;div class="entry-meta"&gt;
            &lt;em&gt;{{ post.date | date: "%b %-d, %Y" }} by {{ site.author.name }}&lt;/em&gt;
        &lt;/div&gt;
    &lt;/article&gt;
{% endfor %}

{% if page.total_pages &gt; 1 %}
    &lt;div class="posts-nav-links clearfix"&gt;        
        {% if page.prev_page %}
            {% if page.prev_page == 1 %}
                &lt;a class="pull-left" href="/blog/"&gt;&amp;lt;&lt;/a&gt;
            {% else %}
                &lt;a class="pull-left" href="/blog/pages/{{ page.prev_page }}"&gt;&amp;lt;&lt;/a&gt;
            {% endif %}
        {% endif %}
        {% if page.next_page %}
            &lt;a class="pull-right" href="/blog/pages/{{ page.next_page }}"&gt;&amp;gt;&lt;/a&gt;
        {% endif %}
    &lt;/div&gt;
{% endif %}

EOS
        
    end

    def url
        if @current_page == 1
            File.join("/", "blog", 'index.html')
        else
            File.join("/", "blog", "pages", "#{@current_page}", 'index.html')
        end
    end

    def to_liquid
        Utils.deep_merge_hashes(self.data, {
            "url" =&gt; self.url,
            "content" =&gt; self.content
        })
    end

    def html?
        true
    end

end
</code></pre>

<p>That is the end of our discussion. Hope you enjoyed it. Just give it a try.</p>

    </article>
    
</div>

<div class="social-share" data-url="http://www.arkaroy.net/blog/category-pagination-in-jekyll/">
    <a class="twitter" href="https://twitter.com/intent/tweet?text=Category Pagination in Jekyll&url=http://www.arkaroy.net/blog/category-pagination-in-jekyll/&via=iarkaroy&related=iarkaroy" rel="nofollow" target="_blank" title="Share this on Twitter">
        <i class="fa fa-twitter fa-fw"></i>
        <span class="shares-twitter">Share</span>
    </a>
    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?t=Category Pagination in Jekyll&u=http://www.arkaroy.net/blog/category-pagination-in-jekyll/" rel="nofollow" target="_blank" title="Share this on Facebook">
        <i class="fa fa-facebook fa-fw"></i>
        <span class="shares-facebook">Share</span>
    </a>
    <a class="googleplus" href="https://plus.google.com/share?url=http://www.arkaroy.net/blog/category-pagination-in-jekyll/" rel="nofollow" target="_blank" title="Share this on Google Plus">
        <i class="fa fa-google-plus fa-fw"></i>
        <span class="shares-googleplus">Share</span>
    </a>
    <a class="linkedin" href="http://www.linkedin.com/shareArticle?mini=true&title=Category Pagination in Jekyll&url=http://www.arkaroy.net/blog/category-pagination-in-jekyll/" rel="nofollow" target="_blank" title="Share this on LinkedIn">
        <i class="fa fa-linkedin fa-fw"></i>
        <span class="shares-linkedin">Share</span>
    </a>
</div>

<br>

<div class="posts-nav-links clearfix">
    
    <a class="pull-left" href="/blog/15-best-bootstrap-alternatives-web-developers/" class="next-post-link" title="15 Best Bootstrap Alternatives for Web Developers"><i class="fa fa-chevron-left fa-fw"></i></a>
    
    
    <a class="pull-right" href="/blog/how-to-use-zaq-codeigniter-template-parser/" class="previous-post-link" title="How to use Zaq: Codeigniter Template Parser Engine"><i class="fa fa-chevron-right fa-fw"></i></a>
    
</div>
                <footer class="page-footer">
    <ul class="footer-menu list-inline">
        <li><i class="fa fa-copyright fa-fw"></i> 2015 Arka Roy</li>
        <li class="menu-separator"></li>
        <li><a href="http://www.facebook.com/iarkaroy" target="_blank" title="Facebook">Facebook</a></li>
        <li class="menu-separator"></li>
        <li><a href="http://www.twitter.com/iarkaroy" target="_blank" title="Twitter">Twitter</a></li>
        <li class="menu-separator"></li>
        <li><a href="https://plus.google.com/+ArkaRoyGPlus" target="_blank" title="Google+">Google+</a></li>
        <li class="menu-separator"></li>
        <li><a href="https://www.linkedin.com/in/iarkaroy" target="_blank" title="LinkedIn">LinkedIn</a></li>
        <li class="menu-separator"></li>
        <li><a href="http://www.behance.net/iarkaroy" target="_blank" title="Behance">Behance</a></li>
        <li class="menu-separator"></li>
        <li><a href="http://www.github.com/iarkaroy" target="_blank" title="Github">Github</a></li>
    </ul>    
</footer>

<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/assets/js/script.js"></script>
<script src="/assets/js/social-popularity-analyzer.js"></script>
            </div>        
            
        </div>

    </body>
</html>