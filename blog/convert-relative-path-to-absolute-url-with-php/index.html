<!doctype html>
<html lang="en" itemscope itemtype="http://schema.org/Article">

    <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Convert Relative Path to Absolute URL with PHP - Arka Roy</title>
    <meta name="description" content="I was developing a Web Crawler with PHP. But whenever I was crawling a url to get the links from that url, I found that most of the websites use relative path to link to their internal pages. The browser is smart enough to convert those relative paths to absolute url and request the correct page whenever those relative paths are clicked. But, as it seems, PHP does not have any inbuilt support to convert those relative paths to absolute urls.

">
    <meta name="author" content="Arka Roy">
    <meta name="google-site-verification" content="Hoal6De7aoiiqdo7jTEmhXXXJo571pQuGeRjB3hY3-c">
    <meta name="msvalidate.01" content="AECE4670236DEBC0B41933B8F9A56547">
    <meta name="yandex-verification" content="5f83a425d7a76ae8">
    <meta name="p:domain_verify" content="a2b47611cc9905cb28e8b90214a6026b">
    <meta name="alexaVerifyID" content="sFRbCPL8KD91Vlkp8gjHT1-yX_o">
    <link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/css/style.css">
    <link href="http://www.arkaroy.net/feed.xml" rel="alternate" type="application/atom+xml" title="Arka Roy">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/image/icon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/image/icon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/image/icon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/image/icon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/image/icon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/image/icon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/image/icon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/image/icon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/image/icon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/assets/image/icon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/image/icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/assets/image/icon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/image/icon/favicon-16x16.png">
    <!--
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    -->

    <link rel="author" href="https://plus.google.com/+ArkaRoyGPlus">
    <meta property="fb:admins" content="100000470507339">

    <!-- Schema.org markup for Google+ -->
    <meta itemprop="name" content="Convert Relative Path to Absolute URL with PHP - Arka Roy">
    <meta itemprop="description" content="I was developing a Web Crawler with PHP. But whenever I was crawling a url to get the links from that url, I found that most of the websites use relative path to link to their internal pages. The browser is smart enough to convert those relative paths to absolute url and request the correct page whenever those relative paths are clicked. But, as it seems, PHP does not have any inbuilt support to convert those relative paths to absolute urls.

">
    <meta itemprop="image" content="http://www.arkaroy.net/assets/image/default-thumbnail.jpg">

    <!-- Open Graph data for Facebook -->
    <meta property="og:title" content="Convert Relative Path to Absolute URL with PHP - Arka Roy">
    <meta property="og:image" content="http://www.arkaroy.net/assets/image/default-thumbnail.jpg">
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://www.arkaroy.net/blog/convert-relative-path-to-absolute-url-with-php/">
    <meta property="og:description" content="I was developing a Web Crawler with PHP. But whenever I was crawling a url to get the links from that url, I found that most of the websites use relative path to link to their internal pages. The browser is smart enough to convert those relative paths to absolute url and request the correct page whenever those relative paths are clicked. But, as it seems, PHP does not have any inbuilt support to convert those relative paths to absolute urls.

">

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="http://www.arkaroy.net/blog/convert-relative-path-to-absolute-url-with-php/">
    <meta name="twitter:title" content="Convert Relative Path to Absolute URL with PHP - Arka Roy">
    <meta name="twitter:description" content="I was developing a Web Crawler with PHP. But whenever I was crawling a url to get the links from that url, I found that most of the websites use relative path to link to their internal pages. The browser is smart enough to convert those relative paths to absolute url and request the correct page whenever those relative paths are clicked. But, as it seems, PHP does not have any inbuilt support to convert those relative paths to absolute urls.

">
    <meta name="twitter:image" content="http://www.arkaroy.net/assets/image/default-thumbnail.jpg">
    <meta name="twitter:site" content="@iarkaroy">
    <meta name="twitter:creator" content="@iarkaroy">

    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-61692534-1', 'auto');
        ga('send', 'pageview');

    </script>
</head>

    <body>
        

        <div class="page-wrapper">
            
            <div class="page-header">
                <div class="display-table">

    
    <header class="display-cell">

        <a href="http://www.arkaroy.net" class="logo">
            <i class="icon-arkaroy-logo"></i>
            <span>Arka Roy</span>
        </a>

        <p>I'm a passionate and proficient web designer and application developer residing in Kolkata, India.</p>

        <nav class="main-nav">

            <ul class="main-menu list-inline">
                <li><a href="/about/">About</a></li>
                <li class="menu-separator"></li>
                <li><a href="/portfolio/">Portfolio</a></li>
                <li class="menu-separator"></li>
                <li><a href="/blog/">Blog</a></li>
                <li class="menu-separator"></li>
                <li><a href="/contact/">Contact</a></li>
            </ul>                

        </nav>

    </header>
    

</div>
            </div>
            
            <div class="page-content">
                <form action="/search" method="get" class="search-form">
    <label class="search-label"><i class="fa fa-search"></i></label>
    <input type="text" name="q" class="search-q" placeholder="Search..." autocomplete="off">
    <button type="submit">Search</button>
</form>

<div class="entry post-entry single">

    <header class="entry-header">
        <h1 class="entry-title">Convert Relative Path to Absolute URL with PHP</h1>
        <p class="entry-meta"><em>Sep 3, 2013 by Arka Roy</em></p>
        <div class="social-share clearfix" data-url="http://www.arkaroy.net/blog/convert-relative-path-to-absolute-url-with-php/">
    
    <a class="twitter" href="https://twitter.com/intent/tweet?text=Convert Relative Path to Absolute URL with PHP&url=http://www.arkaroy.net/blog/convert-relative-path-to-absolute-url-with-php/&via=iarkaroy&related=iarkaroy" rel="nofollow" target="_blank" title="Share this on Twitter">
        <i class="fa fa-twitter"></i>
        <span class="shares-twitter">0</span>
    </a>
    
    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?t=Convert Relative Path to Absolute URL with PHP&u=http://www.arkaroy.net/blog/convert-relative-path-to-absolute-url-with-php/" rel="nofollow" target="_blank" title="Share this on Facebook">
        <i class="fa fa-facebook"></i>
        <span class="shares-facebook">0</span>
    </a>
    
    <a class="googleplus" href="https://plus.google.com/share?url=http://www.arkaroy.net/blog/convert-relative-path-to-absolute-url-with-php/" rel="nofollow" target="_blank" title="Share this on Google Plus">
        <i class="fa fa-google-plus"></i>
        <span class="shares-googleplus">0</span>
    </a>
    
    <a class="linkedin" href="http://www.linkedin.com/shareArticle?mini=true&title=Convert Relative Path to Absolute URL with PHP&url=http://www.arkaroy.net/blog/convert-relative-path-to-absolute-url-with-php/" rel="nofollow" target="_blank" title="Share this on LinkedIn">
        <i class="fa fa-linkedin"></i>
        <span class="shares-linkedin">0</span>
    </a>
    
</div>
        
        <br>
        
    </header>

    <article class="entry-content">
        <p>I was developing a Web Crawler with PHP. But whenever I was crawling a url to get the links from that url, I found that most of the websites use relative path to link to their internal pages. The browser is smart enough to convert those relative paths to absolute url and request the correct page whenever those relative paths are clicked. But, as it seems, PHP does not have any inbuilt support to convert those relative paths to absolute urls.</p>

<p>Therefore, I decided to define a method to do the job. Here I am sharing my method of converting relative path to absolute url.</p>

<p><br /></p>

<h2 id="the-base">The Base</h2>

<p>The first thing to mention is the base url. The relative paths are, actually, relative to the base url. If the page contains any <code>&lt;base&gt;</code> tag with its <code>href</code> attribute set, the browser will treat that url as base url. Otherwise, the browser will treat the url of the current page as the base url.</p>

<p>Now first define a base url:</p>

<pre><code>$baseUrl = 'http://example.com/some/fake/path/page.html';
</code></pre>

<p>So we are assuming that we are currently on this page and this url is our base url as defined with <code>$baseUrl</code>.</p>

<p><br /></p>

<h2 id="the-method">The Method</h2>

<p>As the base url is set, its time to start defining the method:</p>

<pre><code>function absoluteUrl($relativeUrl, $baseUrl) {
    // some codes to execute
}
</code></pre>

<p>Here we will pass the relative path as the <code>$relativeUrl</code> and the base url as the <code>$baseUrl</code>. I decided to pass each and every path I encounter while crawling. Therefore the path may be an absolute one. So we have to keep that in mind.</p>

<p>Now here is the body of the method:</p>

<pre><code>// Skip converting if the relative url like http://... or android-app://... etc.
if (preg_match('/[a-z0-9-]{1,}(:\/\/)/i', $relativeUrl)) {
    return $relativeUrl;
}

// Treat path as invalid if it is like javascript:... etc.
if (preg_match('/^[a-zA-Z]{0,}:[^\/]{0,1}/i', $relativeUrl)) {
    return NULL;
}

// Convert //www.google.com to http://www.google.com
if(substr($relativeUrl, 0, 2) == '//') {
    return 'http:' . $relativeUrl;
}

// If the path is a fragment or query string,
// it will be appended to the base url
if(substr($relativeUrl, 0, 1) == '#' || substr($relativeUrl, 0, 1) == '?') {
    return $baseUrl . $relativeUrl;
}

// Treat paths with doc root, i.e, /about
if(substr($relativeUrl, 0, 1) == '/') {
    return onlySitePath($baseUrl) . $relativeUrl;
}

// For paths like ./foo, it will be appended to the furthest directory
if(substr($relativeUrl, 0, 2) == './') {
    return uptoLastDir($baseUrl) . substr($relativeUrl, 2);
}

// Convert paths like ../foo or ../../bar
if(substr($relativeUrl, 0, 3) == '../') {
    $rel = $relativeUrl;
    $base = uptoLastDir($baseUrl);
    while(substr($rel, 0, 3) == '../') {
        $base = preg_replace('/\/([^\/]+\/)$/i', '/', $base);
        $rel = substr($rel, 3);
    }
    return $base . $rel;
}

// else
return uptoLastDir($baseUrl) . $relativeUrl;
</code></pre>

<p>Now in the method you have found two another method <code>uptoLastDir()</code> and <code>onlySitePath()</code>. Here is those methods:</p>

<pre><code>// Get the root path from url
// http://example.com/some/fake/path/page.html =&gt; http://example.com/
function onlySitePath($url) {
    $url = preg_replace('/(^https?:\/\/.+?\/)(.*)$/i', '$1', $url);
    return rtrim($url, '/');
}

// Get the path with last directory
// http://example.com/some/fake/path/page.html =&gt; http://example.com/some/fake/path/
function uptoLastDir($url) {
    $url = preg_replace('/\/([^\/]+\.[^\/]+)$/i', '', $url);
    return rtrim($url, '/') . '/';
}
</code></pre>

<p><br /></p>

<h2 id="usage">Usage</h2>

<pre><code>echo absoluteUrl('/about', 'http://example.com/dir/');
// Output: http://example.com/about

echo absoluteUrl('dir.html', 'http://example.com/dir/page.html');
// Output: http://example.com/dir/dir.html

echo absoluteUrl('../../foo.html', 'http://example.com/dir/foo/bar/index.html')
// Output: http://example.com/dir/foo.html
</code></pre>

    </article>
    
    <div class="tags">
    
        
        
        
        
        
        
        
        
        
    
    </div>
    
</div>

<div class="social-share clearfix" data-url="http://www.arkaroy.net/blog/convert-relative-path-to-absolute-url-with-php/">
    
    <a class="twitter" href="https://twitter.com/intent/tweet?text=Convert Relative Path to Absolute URL with PHP&url=http://www.arkaroy.net/blog/convert-relative-path-to-absolute-url-with-php/&via=iarkaroy&related=iarkaroy" rel="nofollow" target="_blank" title="Share this on Twitter">
        <i class="fa fa-twitter"></i>
        <span class="shares-twitter">0</span>
    </a>
    
    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?t=Convert Relative Path to Absolute URL with PHP&u=http://www.arkaroy.net/blog/convert-relative-path-to-absolute-url-with-php/" rel="nofollow" target="_blank" title="Share this on Facebook">
        <i class="fa fa-facebook"></i>
        <span class="shares-facebook">0</span>
    </a>
    
    <a class="googleplus" href="https://plus.google.com/share?url=http://www.arkaroy.net/blog/convert-relative-path-to-absolute-url-with-php/" rel="nofollow" target="_blank" title="Share this on Google Plus">
        <i class="fa fa-google-plus"></i>
        <span class="shares-googleplus">0</span>
    </a>
    
    <a class="linkedin" href="http://www.linkedin.com/shareArticle?mini=true&title=Convert Relative Path to Absolute URL with PHP&url=http://www.arkaroy.net/blog/convert-relative-path-to-absolute-url-with-php/" rel="nofollow" target="_blank" title="Share this on LinkedIn">
        <i class="fa fa-linkedin"></i>
        <span class="shares-linkedin">0</span>
    </a>
    
</div>

<br>

<div class="posts-nav-links clearfix">
    
    <a href="/blog/advantages-html5/" class="next-post-link" title="Advantages of HTML5">
        <h4>Previous Post</h4>
        <h5>Advantages of HTML5</h5>
    </a>
    
    
    <a href="/blog/enhance-file-upload-security-with-php/" class="previous-post-link" title="Enhance File Upload Security with PHP">
        <h4>Next Post</h4>
        <h5>Enhance File Upload Security with PHP</h5>
    </a>
    
</div>
                <footer class="page-footer">
    <ul class="footer-menu list-inline">
        <li><i class="fa fa-copyright fa-fw"></i> 2015 Arka Roy</li>
        <li class="menu-separator"></li>
        <li><a href="http://www.facebook.com/iarkaroy" target="_blank" title="Facebook">Facebook</a></li>
        <li class="menu-separator"></li>
        <li><a href="http://www.twitter.com/iarkaroy" target="_blank" title="Twitter">Twitter</a></li>
        <li class="menu-separator"></li>
        <li><a href="https://plus.google.com/+ArkaRoyGPlus" target="_blank" title="Google+">Google+</a></li>
        <li class="menu-separator"></li>
        <li><a href="https://www.linkedin.com/in/iarkaroy" target="_blank" title="LinkedIn">LinkedIn</a></li>
        <li class="menu-separator"></li>
        <li><a href="http://www.behance.net/iarkaroy" target="_blank" title="Behance">Behance</a></li>
        <li class="menu-separator"></li>
        <li><a href="http://www.github.com/iarkaroy" target="_blank" title="Github">Github</a></li>
    </ul>    
</footer>

<!-- jQuery from CDN -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/assets/js/script.js"></script>
<script src="/assets/js/search.js"></script>
<script src="/assets/js/social-popularity-analyzer.js"></script>
            </div>        
            
        </div>
        

    </body>
</html>